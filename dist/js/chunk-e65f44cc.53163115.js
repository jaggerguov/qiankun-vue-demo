(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-e65f44cc"],{"1f9f":function(t,e,o){},"330e":function(t,e,o){},"900e":function(t,e,o){},"989a":function(t,e,o){"use strict";o("330e")},"9ed6":function(t,e,o){"use strict";o.r(e);var n=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"login-container"},[o("div",{staticClass:"login-box"},[o("div",{staticClass:"left"},[o("div",{staticClass:"con"},[o("p",{staticClass:"welcome"},[t._v(" 欢迎来到 "),o("svg-icon",{attrs:{"icon-class":"welcome",color:"#d9b77c"}})],1),o("h1",{staticClass:"name"},[t._v("中惠旅中台")])])]),o("div",{staticClass:"right"},[o("el-form",{ref:"loginForm",staticClass:"login-form",attrs:{model:t.loginForm,"auto-complete":"off","label-position":"left"}},[o("h1",{staticClass:"sub_name"},[t._v("中惠旅中台")]),o("el-form-item",{attrs:{prop:"username"}},[o("span",{staticClass:"svg-container"},[o("svg-icon",{attrs:{"icon-class":"user",color:"#d9b77c"}})],1),o("el-input",{attrs:{name:"username",type:"text","auto-complete":"off",placeholder:"请输入用户名"},model:{value:t.loginForm.username,callback:function(e){t.$set(t.loginForm,"username",e)},expression:"loginForm.username"}}),o("span",{staticClass:"virtual-border"})],1),o("el-form-item",{attrs:{prop:"password"}},[o("span",{staticClass:"svg-container"},[o("svg-icon",{attrs:{"icon-class":"password",color:"#d9b77c"}})],1),o("el-input",{attrs:{type:t.passwordType,name:"password","auto-complete":"off",placeholder:"请输入密码"},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.handleLogin.apply(null,arguments)}},model:{value:t.loginForm.password,callback:function(e){t.$set(t.loginForm,"password",e)},expression:"loginForm.password"}}),o("span",{staticClass:"virtual-border"}),o("span",{staticClass:"show-pwd",on:{click:t.showPwd}},["password"===t.passwordType?o("svg-icon",{attrs:{"icon-class":"eye",color:"#d9b77c"}}):o("svg-icon",{attrs:{"icon-class":"open_eye",color:"#d9b77c"}})],1)],1),o("el-form-item",{staticClass:"forget-pwd-btn"},[o("el-button",{attrs:{type:"text"},on:{click:function(e){return e.stopPropagation(),t.forgetPass.apply(null,arguments)}}},[t._v("忘记密码？")])],1),o("el-form-item",[o("el-button",{staticClass:"login-btn",attrs:{loading:t.loading,type:"primary"},nativeOn:{click:function(e){return e.preventDefault(),t.handleLogin.apply(null,arguments)}}},[t._v("登 录")])],1)],1),t._m(0),o("div",{staticClass:"login-in-way"},[o("ul",{staticClass:"clearfix"},[o("li",{staticClass:"in-way-dd",on:{click:function(e){return e.stopPropagation(),t.ddLogin.apply(null,arguments)}}},[o("div",{staticClass:"recommd"},[t._v("推荐")]),t._m(1),o("span",[t._v("钉钉登录")])]),o("li",{staticClass:"in-way-wx",on:{click:function(e){return e.stopPropagation(),t.wxLogin.apply(null,arguments)}}},[t._m(2),o("span",[t._v("微信登录")])]),o("li",{staticClass:"in-way-sj",on:{click:function(e){return e.stopPropagation(),t.sjLogin.apply(null,arguments)}}},[t._m(3),o("span",[t._v("手机登录")])])])])],1)]),o("other-login",{ref:"otherLogin"}),o("phone-login",{ref:"phoneLogin",attrs:{redirect:t.redirect}})],1)},i=[function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"login-new-line"},[o("span",[t._v("第三方登录")])])},function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"item"},[o("i",{staticClass:"zht-icon-shejiaodingding",staticStyle:{color:"#1296DB"}})])},function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"item"},[o("i",{staticClass:"zht-icon-icon-weixin",staticStyle:{width:"24px",color:"#23BF36"}})])},function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"item"},[o("i",{staticClass:"zht-icon-icon-shouji",staticStyle:{width:"24px",color:"#FF9100"}})])}],s=(o("498a"),function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("transition",{attrs:{name:"fade",mode:"out-in"}},[t.showBox?o("div",{staticClass:"other_login_wrap",on:{click:function(e){return e.stopPropagation(),t.handleClose.apply(null,arguments)}}},[o("div",{staticClass:"other_login_box"},[o("div",{attrs:{id:"login_container"}})])]):t._e()])}),a=[],r={name:"OtherLogin",data:function(){return{showBox:!1}},methods:{handleClose:function(t){"other_login_wrap"===t.target.className&&(this.showBox=!1)}}},c=r,l=(o("989a"),o("2877")),d=Object(l["a"])(c,s,a,!1,null,"10a7d6a2",null),u=d.exports,p=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("transition",{attrs:{name:"fade",mode:"out-in"}},[t.showBox?o("div",{staticClass:"phone-login-box",on:{click:function(e){return e.stopPropagation(),t.handleClose.apply(null,arguments)}}},[o("div",{staticClass:"phone-box"},[o("p",{staticClass:"title"},[t._v("手机登录")]),o("el-form",{ref:"phoneForm",staticClass:"phone-form",attrs:{model:t.phoneForm,"auto-complete":"off","label-position":"left"}},[o("el-form-item",{attrs:{prop:"phoneNum"}},[o("span",{staticClass:"svg-container"},[o("svg-icon",{attrs:{"icon-class":"phone",color:"#d9b77c"}})],1),o("el-input",{attrs:{name:"phoneNum",type:"text","auto-complete":"off",placeholder:"请输入手机号"},model:{value:t.phoneForm.phoneNum,callback:function(e){t.$set(t.phoneForm,"phoneNum",e)},expression:"phoneForm.phoneNum"}})],1),o("el-form-item",{attrs:{prop:"code"}},[o("span",{staticClass:"svg-container"},[o("svg-icon",{attrs:{"icon-class":"code",color:"#d9b77c"}})],1),o("el-input",{attrs:{name:"code",type:"text","auto-complete":"off",placeholder:"请输入短信验证码"},model:{value:t.phoneForm.code,callback:function(e){t.$set(t.phoneForm,"code",e)},expression:"phoneForm.code"}}),o("el-button",{staticClass:"get-phone-code",on:{click:function(e){return e.stopPropagation(),t.getCode.apply(null,arguments)}}},[t._v(t._s(t.time?t.time+" s":"获取验证码"))])],1),o("el-form-item",[o("el-button",{staticClass:"login-btn",attrs:{loading:t.loading,type:"primary"},nativeOn:{click:function(e){return e.preventDefault(),t.handleLogin.apply(null,arguments)}}},[t._v("登 录")])],1)],1)],1)]):t._e()])},m=[],h=(o("4795"),o("ac1f"),o("00b4"),{name:"PhoneLogin",props:{redirect:{type:String,default:""}},data:function(){return{showBox:!1,loading:!1,phoneForm:{phoneNum:"",code:""},timer:null,time:0}},methods:{getCode:function(){var t=this;this.time||(this.time=60,this.timer=setInterval((function(){t.time--,0===t.time&&(window.clearInterval(t.timer),t.timer=null)}),1e3))},handleClose:function(t){"phone-login-box"===t.target.className&&(this.showBox=!1,this.timer&&(window.clearInterval(this.timer),this.timer=null,this.time=0))},handleLogin:function(){var t=this;if(!this.loading){var e=this.phoneForm,o=e.phoneNum,n=e.code;return this.loading=!0,o&&/^1[3456789]\d{9}$/.test(o)?n?void this.$store.dispatch("login",{username:"admin",password:"admin"}).then((function(){t.loading=!1,t.$message.success({message:"登录成功",duration:1e3,onClose:function(){t.$router.push({path:t.redirect||"/"})}})}))["catch"]((function(e){t.loading=!1,t.$message.error({message:e||"验证错误， 请重新登录",duration:1500})})):(this.$message.error({message:"请输入短信验证码",duration:1e3}),this.loading=!1,!1):(this.$message.error({message:"请输入正确的手机号",duration:1e3}),this.loading=!1,!1)}}},beforeDestroy:function(){this.timer&&(window.clearInterval(this.timer),this.timer=null,this.time=0)}}),g=h,f=(o("afb5"),Object(l["a"])(g,p,m,!1,null,"345cf8e1",null)),w=f.exports,v=(o("99af"),o("ed08")),_={data:function(){return{redirect_uri:"",DDAPPID:"xxxxx"}},mounted:function(){this.getDdInfo()},methods:{getDdInfo:function(){var t=this,e=Object(v["b"])("state");if("DD_STATE"===e){var o=Object(v["b"])("code");console.log(o),this.$store.dispatch("login",{username:"admin",password:"admin"}).then((function(){t.$message.success({message:"登录成功",duration:1e3,onClose:function(){t.$router.push({path:"/"})}})}))["catch"]((function(e){t.$message.error({message:e||"验证错误， 请重新登录",duration:1500})}))}},ddLogin:function(){var t=this;this.$refs["otherLogin"].showBox=!0,this.$nextTick((function(){t.redirect_uri=window.location.origin;var e=encodeURIComponent("https://oapi.dingtalk.com/connect/oauth2/sns_authorize?appid=".concat(t.DDAPPID,"&response_type=code&scope=snsapi_login&state=DD_STATE&redirect_uri=").concat(t.redirect_uri));DDLogin({id:"login_container",goto:e,style:"border:none;background-color:transparent;margin: 0 auto",width:"365",height:"325"}),t.listenDDCb()}))},listenDDCb:function(){var t=function(t){var e=t.origin;if("https://login.dingtalk.com"==e){var o=t.data,n="https://oapi.dingtalk.com/connect/oauth2/sns_authorize?appid=".concat(this.DDAPPID,"&response_type=code&scope=snsapi_login&state=DD_STATE&redirect_uri=").concat(this.redirect_uri,"&loginTmpCode=").concat(o);window.location.href=n}};"undefined"!=typeof window.addEventListener?window.addEventListener("message",t,!1):"undefined"!=window.attachEvent&&window.attachEvent("onmessage",t)}}},x={data:function(){return{wx_redirect_uri:"http://www.mogujie.com/oauth/callback/weixin/mogujie",WXAPPID:"wx4530e35e8a9fc5cd"}},methods:{wxLogin:function(){var t=this;this.$refs["otherLogin"].showBox=!0,this.$nextTick((function(){var e="\n          body { display: flex; align-items: center;justify-content: center;}\n          .impowerBox .qrcode {width: 210px;}\n          .impowerBox .title {display: none!important;}\n          .impowerBox .info {width: 200px; color: #d9b77c!important}\n          .impowerBox .status_browser p:last-child { display: none!important }\n          .status_icon {display: none}\n          .impowerBox .status {text-align: center;}\n        ",o=new Blob([e],{type:"text/css;charset=utf-8"}),n=new FileReader;n.readAsDataURL(o);var i=t;n.onload=function(t){new WxLogin({self_redirect:!1,id:"login_container",appid:i.WXAPPID,scope:"snsapi_login",redirect_uri:i.wx_redirect_uri,state:"WX_STATE",style:"black",href:t.currentTarget.result})}}))}}},y={methods:{sjLogin:function(){this.$refs["phoneLogin"].showBox=!0,console.log("sjLogin")}}},b={name:"Login",components:{OtherLogin:u,PhoneLogin:w},mixins:[_,x,y],data:function(){return{loginForm:{username:"",password:""},passwordType:"password",loading:!1,redirect:void 0}},watch:{$route:{handler:function(t){this.redirect=t.query&&t.query.redirect},immediate:!0}},methods:{forgetPass:function(){console.log("忘记密码")},showPwd:function(){this.passwordType="password"===this.passwordType?"":"password"},handleLogin:function(){var t=this;if(!this.loading){var e=this.loginForm,o=e.username,n=e.password;return this.loading=!0,o.trim().length?n.length<5||n.length>20?(this.$message.error({message:"请输入5-20位密码",duration:1e3}),this.loading=!1,!1):void this.$store.dispatch("login",this.loginForm).then((function(){t.loading=!1,t.$message.success({message:"登录成功",duration:1e3,onClose:function(){t.$router.push({path:t.redirect||"/"})}})}))["catch"]((function(e){t.loading=!1,t.$message.error({message:e||"验证错误， 请重新登录",duration:1500})})):(this.$message.error({message:"请输入用户名",duration:1e3}),this.loading=!1,!1)}}}},C=b,$=(o("b09d"),Object(l["a"])(C,n,i,!1,null,"50799c20",null));e["default"]=$.exports},afb5:function(t,e,o){"use strict";o("1f9f")},b09d:function(t,e,o){"use strict";o("900e")}}]);